/* Multivac 42 - Custom Theme */
/* 科技/未來感設計，深色為主 */

/* ========================================
   Google Fonts - Loaded via config.ts head (P-03)
   ======================================== */

/* ========================================
   CSS Variables - Dark Theme (Default)
   ======================================== */
:root {
  /* Typography */
  --vp-font-family-base:
    "Noto Sans TC", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  --vp-font-family-mono:
    "JetBrains Mono", ui-monospace, "Cascadia Code", monospace;

  /* Brand Colors - Amber/Gold */
  --vp-c-brand-1: #f59e0b;
  --vp-c-brand-2: #fbbf24;
  --vp-c-brand-3: #d97706;
  --vp-c-brand-soft: rgba(245, 158, 11, 0.14);

  /* Hero gradient */
  --vp-home-hero-name-color: transparent;
  --vp-home-hero-name-background: linear-gradient(
    135deg,
    #f59e0b 0%,
    #fbbf24 50%,
    #f59e0b 100%
  );

  --vp-home-hero-image-background-image: radial-gradient(
    ellipse at center,
    rgba(245, 158, 11, 0.2) 0%,
    transparent 60%
  );
  --vp-home-hero-image-filter: blur(44px);
}

/* ========================================
   Dark Theme
   ======================================== */
.dark {
  /* Background colors */
  --vp-c-bg: #0a0a0f;
  --vp-c-bg-alt: #161618;
  --vp-c-bg-elv: #1a1a1e;
  --vp-c-bg-soft: #161618;

  /* Text colors */
  --vp-c-text-1: #e6edf3;
  --vp-c-text-2: #8b949e;
  --vp-c-text-3: #6e7681;

  /* Border colors */
  --vp-c-border: #30363d;
  --vp-c-divider: #21262d;
  --vp-c-gutter: #161618;

  /* Surface colors for cards/blocks */
  --vp-c-surface: #161618;

  /* Code block */
  --vp-code-block-bg: #0d1117;
  --vp-code-block-divider-color: #30363d;

  /* Nav */
  --vp-nav-bg-color: rgba(10, 10, 15, 0.85);

  /* Sidebar */
  --vp-sidebar-bg-color: #0a0a0f;
}

/* ========================================
   Light Theme
   ======================================== */
:root:not(.dark) {
  /* Background colors */
  --vp-c-bg: #fafafa;
  --vp-c-bg-alt: #ffffff;
  --vp-c-bg-elv: #ffffff;
  --vp-c-bg-soft: #f4f4f5;

  /* Text colors */
  --vp-c-text-1: #1a1a1a;
  --vp-c-text-2: #6b7280;
  --vp-c-text-3: #9ca3af;

  /* Border colors */
  --vp-c-border: #e5e7eb;
  --vp-c-divider: #e5e7eb;
  --vp-c-gutter: #f4f4f5;

  /* Adjusted brand for light mode */
  --vp-c-brand-1: #d97706;
  --vp-c-brand-2: #b45309;
  --vp-c-brand-3: #92400e;

  /* Hero gradient for light mode */
  --vp-home-hero-name-background: linear-gradient(
    135deg,
    #d97706 0%,
    #f59e0b 50%,
    #d97706 100%
  );
}

/* ========================================
   T-04: 中文排版優化
   ======================================== */
body {
  /* 字體渲染優化 - 移除 palt/halt（日文專用，會壓縮中文字距） */
  font-feature-settings:
    "kern" 1,
    "liga" 1,
    "calt" 1;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========================================
   T-05: 字體載入優化
   ======================================== */
/* 防止 FOUT - 字體載入時的視覺穩定性 */
@font-face {
  font-family: "Noto Sans TC Fallback";
  src: local("PingFang TC"), local("Microsoft JhengHei"), local("Heiti TC");
  font-display: swap;
  ascent-override: 100%;
  descent-override: 20%;
  line-gap-override: 0%;
}

/* 確保中文字體載入順序正確 */
:root {
  --vp-font-family-base:
    "Noto Sans TC", "Noto Sans TC Fallback", -apple-system, BlinkMacSystemFont,
    "Segoe UI", sans-serif;
}

/* ========================================
   Global Styles
   ======================================== */
html {
  scroll-behavior: smooth;
}

/* ========================================
   Navigation Bar
   ======================================== */
.VPNav {
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
}

.dark .VPNav {
  background: rgba(10, 10, 15, 0.8) !important;
  border-bottom: 1px solid var(--vp-c-border);
}

/* Nav title - monospace style */
.VPNavBarTitle .title {
  font-family: var(--vp-font-family-mono);
  font-weight: 600;
  letter-spacing: -0.02em;
}

/* Nav links hover effect */
.VPNavBarMenuLink:hover .text,
.VPNavBarMenuLink.active .text {
  color: var(--vp-c-brand-1);
}

/* ========================================
   Hero Section
   ======================================== */
.VPHero .name {
  font-family: var(--vp-font-family-mono);
  font-weight: 700;
  letter-spacing: -0.03em;
}

/* Blinking cursor effect after hero name */
.VPHero .name::after {
  content: "_";
  animation: blink 1s step-end infinite;
  color: var(--vp-c-brand-1);
  opacity: 0.8;
}

@keyframes blink {
  0%,
  50% {
    opacity: 1;
  }
  51%,
  100% {
    opacity: 0;
  }
}

.VPHero .text {
  font-weight: 500;
}

.VPHero .tagline {
  color: var(--vp-c-text-2);
}

/* Hero buttons */
.VPButton.brand {
  background: linear-gradient(135deg, var(--vp-c-brand-1), var(--vp-c-brand-2));
  border: none;
  box-shadow: 0 4px 14px rgba(245, 158, 11, 0.25);
  transition: all 0.3s ease;
}

.VPButton.brand:hover {
  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.35);
}

.VPButton.alt {
  border-color: var(--vp-c-border);
  transition: all 0.3s ease;
}

.VPButton.alt:hover {
  border-color: var(--vp-c-brand-1);
  color: var(--vp-c-brand-1);
}

/* ========================================
   Features Section
   ======================================== */
.VPFeature {
  background: var(--vp-c-bg-soft);
  border: 1px solid var(--vp-c-border);
  border-radius: 12px;
  transition: all 0.3s ease;
  cursor: default;
}

.VPFeature:hover {
  border-color: var(--vp-c-brand-1);
  box-shadow: 0 0 20px rgba(245, 158, 11, 0.1);
}

.VPFeature .title {
  font-family: var(--vp-font-family-mono);
  font-weight: 600;
}

/* ========================================
   Content / Articles
   ======================================== */

/* T-01~03: 排版優化 - 行高、段距、最大寬度 */
.vp-doc {
  line-height: 1.9; /* 中文閱讀最佳行高 */
  letter-spacing: 0.04em; /* 統一字距，確保標題與內文對齊 */
  word-spacing: 0.05em; /* 詞間距 */
  font-size: 16px; /* 確保基礎字體大小 */
}

.vp-doc p {
  margin: 1.5em 0; /* 增加段落間距 */
}

.vp-doc li {
  margin: 0.5em 0;
}

/* 確保文章內容最大寬度適合閱讀 */
.VPDoc.has-aside .vp-doc {
  max-width: 720px;
}

/* 修復標題對齊 - VitePress 預設 flex 會導致偏移 */
.vp-doc h1,
.vp-doc h2,
.vp-doc h3,
.vp-doc h4 {
  display: block !important;
  position: relative !important;
  font-weight: 600;
}

/* h2 anchor 需要考慮 padding-top: 16px */
.vp-doc h2 .header-anchor {
  position: absolute !important;
  left: 0 !important;
  top: 16px !important;
  transform: translateX(-100%) !important;
  margin-left: -8px !important;
}

/* h1, h3, h4 anchor */
.vp-doc h1 .header-anchor,
.vp-doc h3 .header-anchor,
.vp-doc h4 .header-anchor {
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  transform: translateX(-100%) !important;
  margin-left: -8px !important;
}

.vp-doc h1 {
  font-size: 2rem;
  border-bottom: none;
  padding-bottom: 0.5rem;
}

/* Horizontal rule - single line style */
.vp-doc hr {
  margin: 2rem 0;
  border: none !important;
  border-top: 1px solid var(--vp-c-divider) !important;
  height: 0;
  background: transparent !important;
}

/* Links */
.vp-doc a {
  color: var(--vp-c-brand-1);
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: border-color 0.2s ease;
}

.vp-doc a:hover {
  border-bottom-color: var(--vp-c-brand-1);
}

/* Code blocks */
.dark .vp-code-group,
.dark div[class*="language-"] {
  background: #0d1117;
}

/* Inline code */
.vp-doc :not(pre) > code {
  background: var(--vp-c-bg-soft);
  border: 1px solid var(--vp-c-border);
  border-radius: 4px;
  padding: 2px 6px;
  font-family: var(--vp-font-family-mono);
  font-size: 0.9em;
}

/* ========================================
   Footer
   ======================================== */
.VPFooter {
  border-top: 1px solid var(--vp-c-border);
}

.VPFooter .message,
.VPFooter .copyright {
  color: var(--vp-c-text-3);
  font-size: 0.875rem;
}

/* ========================================
   Scrollbar (Dark theme)
   ======================================== */
.dark ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.dark ::-webkit-scrollbar-track {
  background: var(--vp-c-bg);
}

.dark ::-webkit-scrollbar-thumb {
  background: var(--vp-c-border);
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: var(--vp-c-text-3);
}

/* ========================================
   Animations
   ======================================== */
/* Page transition */
.VPContent {
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========================================
   Background Grid Pattern (Hero)
   ======================================== */
.VPHome::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image:
    linear-gradient(rgba(245, 158, 11, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(245, 158, 11, 0.03) 1px, transparent 1px);
  background-size: 50px 50px;
  pointer-events: none;
  z-index: -1;
}

.dark .VPHome::before {
  background-image:
    linear-gradient(rgba(245, 158, 11, 0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(245, 158, 11, 0.05) 1px, transparent 1px);
}

/* ========================================
   Search
   ======================================== */
.DocSearch-Button {
  background: var(--vp-c-bg-soft) !important;
  border: 1px solid var(--vp-c-border) !important;
}

.DocSearch-Button:hover {
  border-color: var(--vp-c-brand-1) !important;
}

/* ========================================
   Article Page Styles
   ======================================== */
/* Article header tags */
.vp-doc .article-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.vp-doc .article-tag {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  font-size: 0.8rem;
  font-family: var(--vp-font-family-mono);
  color: var(--vp-c-brand-1);
  background: var(--vp-c-brand-soft);
  border: 1px solid rgba(245, 158, 11, 0.3);
  border-radius: 4px;
  text-decoration: none;
  transition: all 0.2s ease;
}

.vp-doc .article-tag:hover {
  background: rgba(245, 158, 11, 0.2);
  border-color: var(--vp-c-brand-1);
}

/* Article meta info */
.vp-doc .article-meta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--vp-c-divider);
  font-size: 0.9rem;
  color: var(--vp-c-text-2);
}

.vp-doc .article-meta-item {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.vp-doc .article-meta-separator {
  color: var(--vp-c-text-3);
}

.vp-doc .article-author {
  font-weight: 500;
  color: var(--vp-c-text-1);
}

.vp-doc .article-date {
  font-family: var(--vp-font-family-mono);
}

.vp-doc .article-reading-time {
  color: var(--vp-c-text-3);
}

/* Article description/excerpt */
.vp-doc .article-description {
  font-size: 1.1rem;
  line-height: 1.7;
  color: var(--vp-c-text-2);
  margin-bottom: 2rem;
  padding: 1.25rem;
  background: var(--vp-c-bg-soft);
  border-left: 3px solid var(--vp-c-brand-1);
  border-radius: 0 8px 8px 0;
}

/* ========================================
   Article Header - Hide original h1
   ======================================== */
/* Hide the first h1 in article content when ArticleHeader renders title */
.vp-doc > div > h1:first-child {
  display: none !important;
}

/* ========================================
   h2 - Remove default border-top
   ======================================== */
.vp-doc h2 {
  border-top: none;
  margin-top: 2rem;
  padding-top: 1rem;
}

/* ========================================
   Layout Adjustments

   Goal: Navbar and content area alignment
   - Content: 800px
   - TOC: 256px
   - Gap: 32px
   - Total: 1088px
   ======================================== */

/*
 * Both NavBar and VPDoc containers: same max-width for alignment
 */
@media (min-width: 1280px) {
  /* NavBar container */
  .VPNavBar .wrapper > .container {
    max-width: 1088px !important;
  }

  /* VPDoc container - use multiple selectors for specificity */
  .VPDoc > .container,
  .VPDoc.has-aside > .container,
  .VPDoc:not(.has-sidebar) > .container {
    max-width: 1088px !important;
    justify-content: flex-start !important;
  }

  /* Remove content padding to align edges */
  .VPDoc .content {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
}

/*
 * Content container: 800px for readability
 */
.VPDoc.has-aside .content-container {
  max-width: 800px !important;
}

/*
 * List pages (no aside): full width for card grids
 */
.VPDoc:not(.has-aside) .content {
  max-width: 100% !important;
}

.VPDoc:not(.has-aside) .content-container {
  max-width: 100% !important;
}

.VPDoc:not(.has-aside) .vp-doc {
  max-width: 100% !important;
}

/*
 * Home page sections: align with NavBar width (1088px)
 */
@media (min-width: 1280px) {
  .VPHero .container {
    max-width: 1088px !important;
    margin: 0 auto;
  }

  .VPFeatures .container {
    max-width: 1088px !important;
    margin: 0 auto;
  }
}

/* ========================================
   Table of Contents (Outline) Fix
   ======================================== */
.VPDocAsideOutline .outline-title {
  padding-left: 12px;
}

.VPDocAsideOutline .outline-link {
  padding-left: 12px;
}

.VPDocAsideOutline .outline-link.nested {
  padding-left: 24px;
}

/* ========================================
   Header Anchor (#) Alignment Fix
   ======================================== */
.vp-doc h1,
.vp-doc h2,
.vp-doc h3,
.vp-doc h4,
.vp-doc h5,
.vp-doc h6 {
  display: flex;
  align-items: baseline;
}

.vp-doc .header-anchor {
  position: relative !important;
  top: auto !important;
  order: -1;
  margin-right: 0.5em;
  margin-left: -1.5em;
  font-weight: 500;
  opacity: 0;
  transition: opacity 0.25s;
}

.vp-doc h1:hover .header-anchor,
.vp-doc h2:hover .header-anchor,
.vp-doc h3:hover .header-anchor,
.vp-doc h4:hover .header-anchor,
.vp-doc h5:hover .header-anchor,
.vp-doc h6:hover .header-anchor {
  opacity: 1;
}

/* ========================================
   F-02: 列印樣式
   ======================================== */
@media print {
  /* 隱藏不需要列印的元素 */
  .VPNav,
  .VPSidebar,
  .VPLocalNav,
  .VPDocAside,
  .VPFooter,
  .VPBackdrop,
  .reading-progress,
  .back-to-top,
  .floating-toc,
  .share-buttons,
  .related-posts,
  .article-nav,
  .series-nav,
  .comments,
  .header-anchor,
  .VPDocFooter {
    display: none !important;
  }

  /* 重設背景和顏色 */
  body,
  .VPContent,
  .VPDoc,
  .vp-doc {
    background: white !important;
    color: black !important;
  }

  /* 文章內容全寬 */
  .VPDoc .container,
  .VPDoc .content,
  .VPDoc .content-container {
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* 標題樣式 */
  .vp-doc h1,
  .vp-doc h2,
  .vp-doc h3 {
    color: black !important;
    page-break-after: avoid;
  }

  .vp-doc h1 {
    font-size: 24pt !important;
    margin-bottom: 12pt !important;
  }

  .vp-doc h2 {
    font-size: 18pt !important;
    margin-top: 18pt !important;
    border-top: none !important;
  }

  .vp-doc h3 {
    font-size: 14pt !important;
  }

  /* 段落樣式 */
  .vp-doc p {
    font-size: 11pt !important;
    line-height: 1.6 !important;
    orphans: 3;
    widows: 3;
  }

  /* 連結 - 顯示網址 */
  .vp-doc a {
    color: black !important;
    text-decoration: underline !important;
  }

  .vp-doc a[href^="http"]::after {
    content: " (" attr(href) ")";
    font-size: 9pt;
    color: #666;
  }

  /* 內部連結不顯示網址 */
  .vp-doc a[href^="#"]::after,
  .vp-doc a[href^="/"]::after {
    content: none;
  }

  /* 程式碼區塊 */
  .vp-doc pre,
  .vp-doc code {
    background: #f5f5f5 !important;
    border: 1px solid #ddd !important;
    font-size: 9pt !important;
  }

  .vp-doc pre {
    page-break-inside: avoid;
    padding: 8pt !important;
    overflow: visible !important;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
  }

  /* 圖片 */
  .vp-doc img {
    max-width: 100% !important;
    page-break-inside: avoid;
  }

  /* 表格 */
  .vp-doc table {
    page-break-inside: avoid;
    border-collapse: collapse !important;
  }

  .vp-doc th,
  .vp-doc td {
    border: 1px solid #ddd !important;
    padding: 6pt !important;
  }

  /* 引用區塊 */
  .vp-doc blockquote {
    border-left: 3pt solid #ccc !important;
    padding-left: 12pt !important;
    color: #333 !important;
    page-break-inside: avoid;
  }

  /* 列表 */
  .vp-doc ul,
  .vp-doc ol {
    page-break-inside: avoid;
  }

  /* 文章標頭 */
  .article-header {
    border-bottom: 1pt solid #ddd !important;
    padding-bottom: 12pt !important;
    margin-bottom: 18pt !important;
  }

  .article-title {
    font-size: 28pt !important;
    color: black !important;
  }

  .header-byline {
    color: #666 !important;
    font-size: 10pt !important;
  }

  .header-tags {
    display: none !important;
  }

  /* 頁面邊距 */
  @page {
    margin: 2cm;
  }
}
